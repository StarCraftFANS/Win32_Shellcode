var bdShare=bdShare||{};bdShare._LogPool=bdShare._LogPool||[];if(!bdShare.ApiPVLogger){(function(J){var F,B=F=B||{version:"1.5.2.2"};B.guid="$BAIDU$";B.$$=window[B.guid]=window[B.guid]||{global:{}};B.ajax=B.ajax||{};B.fn=B.fn||{};B.fn.blank=function(){};B.ajax.request=function(s,W){var u=W||{},P=u.data||"",Z=!(u.async===false),t=u.username||"",x=u.password||"",v=(u.method||"GET").toUpperCase(),w=u.headers||{},X=u.timeout||0,V={},S,O,Y;function T(){if(Y.readyState==4){try{var a=Y.status}catch(b){Q("failure");return }Q(a);if((a>=200&&a<300)||a==304||a==1223){Q("success")}else{Q("failure")}window.setTimeout(function(){Y.onreadystatechange=B.fn.blank;if(Z){Y=null}},0)}}function U(){if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}}if(window.XMLHttpRequest){return new XMLHttpRequest()}}function Q(b){b="on"+b;var c=V[b],a=B.ajax[b];if(c){if(S){clearTimeout(S)}if(b!="onsuccess"){c(Y)}else{try{Y.responseText}catch(d){return c(Y)}c(Y,Y.responseText)}}else{if(a){if(b=="onsuccess"){return }a(Y)}}}for(O in u){V[O]=u[O]}w["X-Requested-With"]="XMLHttpRequest";try{Y=U();if(v=="GET"){if(P){s+=(s.indexOf("?")>=0?"&":"?")+P;P=null}if(u.noCache){s+=(s.indexOf("?")>=0?"&":"?")+"b"+(+new Date)+"=1"}}if(t){Y.open(v,s,Z,t,x)}else{Y.open(v,s,Z)}if(Z){Y.onreadystatechange=T}if(v=="POST"){Y.setRequestHeader("Content-Type",(w["Content-Type"]||"application/x-www-form-urlencoded"))}for(O in w){if(w.hasOwnProperty(O)){Y.setRequestHeader(O,w[O])}}Q("beforerequest");if(X){S=setTimeout(function(){Y.onreadystatechange=B.fn.blank;Y.abort();Q("timeout")},X)}Y.send(P);if(!Z){T()}}catch(R){Q("failure")}return Y};B.browser=B.browser||{};(function(){var O=navigator.userAgent;B.browser.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(O)&&!/chrome/i.test(O)?+(RegExp["\x241"]||RegExp["\x242"]):undefined})();B.browser.ie=B.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["\x241"]):undefined;B.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp["\x246"]||RegExp["\x242"]):undefined;B.dom=B.dom||{};(function(){var O=B.dom.ready=function(){var Q=false,R=[],U;if(document.addEventListener){U=function(){document.removeEventListener("DOMContentLoaded",U,false);T()}}else{if(document.attachEvent){U=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",U);T()}}}}function T(){if(!T.isReady){T.isReady=true;for(var V=0,W=R.length;V<W;V++){R[V]()}}}function P(){try{document.documentElement.doScroll("left")}catch(V){setTimeout(P,1);return }T()}function S(){if(Q){return }Q=true;if(document.readyState==="complete"){T.isReady=true}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",U,false);window.addEventListener("load",T,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",U);window.attachEvent("onload",T);var W=false;try{W=window.frameElement==null}catch(V){}if(document.documentElement.doScroll&&W){P()}}}}}S();return function(V){T.isReady?V():R.push(V)}}();O.isReady=false})();F.undope=true;var K={cite:0,img:1,addto:2,video:3};var L=window.location||document.location;var G=(function(){var O=[];return function(P){var R="bdsharelog__"+(new Date()).getTime(),Q=O[R]=new Image();Q.onload=(Q.onerror=function(){O[R]=null});Q.src=P;Q=null}})();var E=function(U){var O=document.body.offsetWidth,Q=document.body.offsetHeight,P=window.screen.availWidth,R=window.screen.availHeight,T=[O,Q,P,R].join(",");var S="http://nsclick.baidu.com/v.gif?pid=307&type=3071&sc="+T+"&desturl="+encodeURIComponent(document.referrer)+"&";G(S+U)};function D(Q,P){var O=[];for(var R in P){var S=typeof P[R];if((S!="function"&&S!="object")&&P.hasOwnProperty(R)){O.push(Q+"_"+R+"="+P[R])}}return O.join("&")}function C(){var Q=bdShare._LogPool||[],T={};for(var P=Q.length-1;P>=0;P--){var S=Q[P],R=T[S.key];if(R){R.linkid=R.linkid||S.api.linkid;R.type=(R.type||0)|(S.api.type||0)}else{T[S.key]=S.api}}Q=[];for(var O in T){if(T.hasOwnProperty(O)){Q.push({key:O,api:T[O]})}}bdShare._LogPool=Q;return Q}function A(){var R=bdShare._LogPool||[],O=R.length;if(O>0){R=C();O=R.length;var T=[],U="",S=null,Q=[0,0,0,0,0,0,0,0];for(var P=0;P<O;P++){S=R[P];Q[K[S.key]]=1;if(S.api.linkid){U=S.api.linkid;delete S.api.linkid}T.push(D(S.key,S.api))}T.unshift("linkid="+U);T.unshift("apitype="+parseInt(Q.reverse().join(""),2));E(T.join("&"))}}var N=false;function H(){N=true;F.dom.ready(function(){setTimeout(function(){I();M()},1000)})}var M=function(){var P=+new Date();var Q={spendTime:0,scrollTop:0};var S=+new Date();var O=function(){var U=new Date()-S;if(U>Q.spendTime){var T=document.compatMode=="BackCompat"?document.body:document.documentElement;Q={spendTime:U,scrollTop:(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),viewHeight:T.clientHeight}}S=new Date()};var R=function(V,U,T){if(V.addEventListener){V.addEventListener(U,T,false)}else{if(V.attachEvent){V.attachEvent("on"+U,T)}}};R(window,"scroll",O);R(window,"beforeunload",function(){var U=new Date()-P;O();var T=["http://nsclick.baidu.com/v.gif?pid=307","type=3075","l="+U,"t="+Q.scrollTop,"s="+Q.spendTime,"v="+Q.viewHeight].join("&");if(/firefox\/(\d+\.\d+)/i.test(navigator.userAgent)){F.ajax.request(T,{async:false,timeout:300})}else{G(T)}})};var I=(function(){var O=0;return function(){if(bdShare.velocity&&(!bdShare.velocity.mainJsLoaded||!bdShare.velocity.cssLoadEnd)&&O++<3){setTimeout(I,1000)}else{if(bdShare.velocity){var P=(Math.max(bdShare.velocity.cssLoadEnd,bdShare.velocity.mainJsLoaded)-bdShare.velocity.start)||0;var Q=(bdShare.velocity.cssLoadEnd-bdShare.velocity.cssLoadStart)||0;var R=(bdShare.velocity.mainJsLoaded-bdShare.velocity.start)||0;if(bdShare._LogPool.length>0){bdShare._LogPool.push({key:"velo",api:{load:P,cssload:Q,jsLoad:R}})}}A()}}})();J.ApiPVLogger={add:function(P,O){bdShare._LogPool.push({key:P,api:O})}};if(!N){H()}})(bdShare)};